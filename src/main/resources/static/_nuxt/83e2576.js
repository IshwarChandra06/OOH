(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{534:function(e,t,r){var content=r(574);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(15).default)("2225b840",content,!0,{sourceMap:!1})},550:function(e,t,r){"use strict";r.r(t);r(8),r(12),r(13);var n=r(3),c=r(57),o=r(1),l=(r(41),r(11),r(27),r(319),r(10),r(9),r(78)),h=r(526);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={props:["isPopUP","chipFieldsFromDailyReportPage","isPage"],data:function(){return{selectedRow:null,selectedData:{},true:!0,loading:!1,campaignData:[],options:{pageNumber:null,page:1,itemsPerPage:10},agencyOrg:[],brandOrg:[],singleSelect:!1,selectedItem:[],searchData:{},headers:[{text:"Id",align:"start",value:"id"},{text:"Name",value:"name"},{text:"Agency",value:"agency"},{text:"Brand",value:"brand"},{text:"Start Date",value:"startDate"},{text:"End Date",value:"endDate"},{text:"Owned Asset",value:"ownedAsset"}],startDate:"",tableFields:[],selectedFields:[],chipFields:[],chipFilterObj:{}}},computed:f(f({},Object(l.c)({getCampaignData:function(e){return e.campaign.campaign},agencyOrgList:function(e){return e.organizations.agencyOrgList},brandOrgList:function(e){return e.organizations.brandOrgList},isSerching:function(e){return e.campaign.isSearching}})),{},{checkIsPopup:function(){return!!this.isPopUP},isPageLoading:function(){if(console.log("isPage",this.isPage),this.isPage)return!0}}),watch:{options:{handler:function(){this.dispatchCampaignFilter()}},getCampaignData:function(e){if(console.log("changes",e),e&&e.length){this.loading=!1,this.campaignData=JSON.parse(JSON.stringify(e));for(var i=0;i<this.campaignData.length;i++)this.campaignData[i].startDate&&(console.log(this.campaignData[i].startDate),this.campaignData[i].startDate=new Date(this.campaignData[i].startDate).toISOString().substring(0,10)),this.campaignData[i].endDate&&(console.log(this.campaignData[i].endDate),this.campaignData[i].endDate=new Date(this.campaignData[i].endDate).toISOString().substring(0,10))}else this.loading=!1,this.campaignData=[]},agencyOrgList:function(e){e&&e.length&&(this.agencyOrg=e)},brandOrgList:function(e){e&&e.length&&(this.brandOrg=e)},startDate:function(e){console.log("date",e),this.startDate=new Date(e).toISOString(),console.log("date",e)},endDate:function(e){this.endDate=new Date(e).toISOString().substring(0,10)},selectedItem:function(e){if(console.log("selectedItem",e),e){var t=e||null;console.log("selected item",e),this.checkIsPopup||this.$emit("getCompId",t)}},selectedFields:function(e){var t=this;if(e){var r=e.filter((function(e){var r=e.field;return!t.chipFields.some((function(e){return e.field===r}))})),n=this.chipFields.filter((function(t){var r=t.field;return!e.some((function(e){return e.field===r}))}));if(r&&r.length&&(this.chipFields=[].concat(Object(c.a)(this.chipFields),Object(c.a)(r))),n&&n.length){var o=this.chipFields.filter((function(e){var t=e.field;return!n.some((function(e){return e.field===t}))}));this.chipFields=o}this.chipFields=JSON.parse(JSON.stringify(this.chipFields))}},isSerching:function(e){console.log("searching wtach",e),this.loading=e},chipFields:function(e){e&&!e.length&&(console.log("fecthing orgs if no filter"),this.$store.dispatch("campaign/fetchCampaignWithFilter"))}},methods:{setTableParams:function(){var e=this.options,t=e.sortBy,r=e.sortDesc,n=e.page,c=e.itemsPerPage;this.pageNumber=n,this.sort=t[0],this.sortDirection=r[0]?"asc":"dec",this.itemsPerPage=c},dispatchCampaignFilter:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.setTableParams(),r={searchData:e.searchData,pageNo:e.pageNumber,pageSize:e.itemsPerPage,orgId:e.orgId},e.sort&&(r.sortField=e.sort),e.sortDirection&&(r.sortOrder=e.sortDirection),t.next=7,e.grabChipFilter();case 7:e.chipFilterObj&&Object.keys(e.chipFilterObj).length&&(r.searchData=f(f({},r.searchData),e.chipFilterObj)),console.log("dispatchCampaignFilter",r),e.$store.dispatch("campaign/fetchCampaign",r).then((function(){e.loading=!1})).catch((function(t){console.error("errors",t),e.loading=!1}));case 10:case"end":return t.stop()}}),t)})))()},grabChipFilter:function(){if(this.isPopUP)if(this.chipFields&&this.chipFields.length){var e={};this.chipFields.forEach((function(t){t=JSON.parse(JSON.stringify(t)),e[t.field]=t.searchKey})),this.chipFilterObj=e}else this.chipFilterObj={};else if(this.chipFieldsFromDailyReportPage&&this.chipFieldsFromDailyReportPage.length){var t={};this.chipFieldsFromDailyReportPage.forEach((function(e){e=JSON.parse(JSON.stringify(e)),t[e.field]=e.searchKey})),this.chipFilterObj=t}else this.chipFilterObj={}},addCampaign:function(){if(console.log("selecteddARA",this.selectedData),this.checkIsPopup){var e=null;this.selectedData&&this.selectedData.id?(e=this.selectedData,console.log("selectcamp",e),this.$emit("getCompId",e)):this.$showErrorToast(this,"Please select Campaign")}},closePopup:function(){console.log("i m here"),this.$emit("closeCampPopup")},rowSelect:function(e,t){console.log("log"),this.selectedRow=t,this.selectedData=e,console.log("all data",this.selectedData),this.checkIsPopup||(console.log("inside"),this.$emit("getCompId",e))},setTableFields:function(){var e=this;this.headers&&this.headers.length&&this.headers.forEach((function(t){"actions"!=t.value&&e.tableFields.push({field:t.value,searchKey:""})}))},updateSelectedFields:function(e){this.chipFields=this.chipFields.filter((function(t){return t.field!==e.field})),this.selectedFields=this.selectedFields.filter((function(t){return t.field!==e.field}))},trigerFilter:function(e){var t={searchData:{},pageNo:1,pageSize:this.itemsPerPage};if(this.sort&&(t.sortField=this.sort),this.sortDirection&&(t.sortOrder=this.sortDirection),this.chipFields&&this.chipFields.length){var r={};this.chipFields.forEach((function(e){e=JSON.parse(JSON.stringify(e)),r[e.field]=e.searchKey})),t.searchData=r}e&&13==e.keyCode&&this.$store.dispatch("campaign/fetchCampaignWithFilter",t)},preparePayload:function(){var e={searchData:{},pageNo:1,pageSize:this.itemsPerPage||10};if(this.sort&&(e.sortField=this.sort),this.sortDirection&&(e.sortOrder=this.sortDirection),this.chipFields&&this.chipFields.length){var t={};this.chipFields.forEach((function(e){e=JSON.parse(JSON.stringify(e)),t[e.field]=e.value})),e.searchData=t}return e},onChangeFilter:h.debounce((function(){var e={searchData:{},pageNo:1,pageSize:this.itemsPerPage||10};if(this.sort&&(e.sortField=this.sort),this.sortDirection&&(e.sortOrder=this.sortDirection),this.chipFields&&this.chipFields.length){var t={};this.chipFields.forEach((function(e){e=JSON.parse(JSON.stringify(e)),t[e.field]=e.searchKey})),e.searchData=t}this.$store.dispatch("campaign/fetchCampaignWithFilter",e)}),1500)},created:function(){this.$store.dispatch("campaign/fetchCampaign"),this.$store.dispatch("organizations/fetchOrgListByAgency"),this.$store.dispatch("organizations/fetchOrgListByBrand"),this.setTableFields()}},v=(r(573),r(45)),D=r(56),F=r.n(D),O=r(528),y=r(234),P=r(224),_=r(99),S=r(591),w=r(757),C=r(220),k=r(502),j=r(482),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.checkIsPopup?r("v-card",{attrs:{color:"primary",flat:"",dark:""}},[r("v-card-title",[r("v-btn",{staticClass:"mr-2",attrs:{icon:"",dark:""},on:{click:e.closePopup}},[r("v-icon",[e._v("mdi-close")])],1),e._v("\n      Campaign\n      "),r("v-spacer"),e._v(" "),r("v-autocomplete",{attrs:{label:"Add Filter",items:e.tableFields,required:"",multiple:"","return-object":"","item-text":"field","item-value":"field",color:"white",dark:""},model:{value:e.selectedFields,callback:function(t){e.selectedFields=t},expression:"selectedFields"}}),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"black--text px-6",attrs:{color:"white"},on:{click:e.addCampaign}},[e._v("SELECT")])],1)],1):e._e(),e._v(" "),r("v-card",{attrs:{dark:"",color:"primary",flat:""}},[e.chipFields&&e.chipFields.length?r("div",e._l(e.chipFields,(function(t,n){return r("v-chip",{key:n,staticClass:"ma-2 white--text",attrs:{close:"",color:"rgba(255,255,255,.15)"},on:{"click:close":function(r){return e.updateSelectedFields(t)}}},[e._v("\n        "+e._s(t.field)+" :\n        "),r("v-text-field",{attrs:{label:"value",flat:"","single-line":"",width:"50px"},on:{keydown:e.trigerFilter,input:e.onChangeFilter},model:{value:t.searchKey,callback:function(r){e.$set(t,"searchKey",r)},expression:"item.searchKey"}})],1)})),1):e._e()]),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.campaignData,options:e.options,"item-key":"name","footer-props":{"items-per-page-options":[5,10,30,50,100]},loading:e.loading,"loading-text":"Loading... Please wait","sort-by":"id"},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"body",fn:function(t){var n=t.items;return[r("tbody",e._l(n,(function(t,n){return r("tr",{key:t.name,class:n===e.selectedRow?"highlight-row":"",on:{click:function(r){return e.rowSelect(t,n)}}},[r("td",[e._v(e._s(t.id))]),e._v(" "),r("td",[e._v(e._s(t.name))]),e._v(" "),r("td",[e._v(e._s(t.agency.name))]),e._v(" "),r("td",[e._v(e._s(t.brand.name))]),e._v(" "),r("td",[e._v(e._s(t.startDate))]),e._v(" "),r("td",[e._v(e._s(t.endDate))]),e._v(" "),r("td",[e._v(e._s(t.ownedAsset))])])})),0)]}}])})],1)}),[],!1,null,"3791392c",null);t.default=component.exports;F()(component,{VAutocomplete:O.a,VBtn:y.a,VCard:P.a,VCardTitle:_.d,VChip:S.a,VDataTable:w.a,VIcon:C.a,VSpacer:k.a,VTextField:j.a})},573:function(e,t,r){"use strict";r(534)},574:function(e,t,r){var n=r(14)(!1);n.push([e.i,".highlight-row[data-v-3791392c]{background-color:pink}.v-card__subtitle[data-v-3791392c],.v-card__text[data-v-3791392c],.v-card__title[data-v-3791392c]{padding:0 1rem}",""]),e.exports=n}}]);